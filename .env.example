# =============================================================================
# БОТ УВД — ШАБЛОН КОНФИГУРАЦИИ
# Скопируйте этот файл в .env и заполните значения. В репозиторий коммитить .env НЕЛЬЗЯ.
# =============================================================================


# -----------------------------------------------------------------------------
# БОТ И СЕРВЕР
# -----------------------------------------------------------------------------
# Токен приложения: Discord Developer Portal → Your App → Bot → Reset Token / Copy
DISCORD_BOT_TOKEN=your_bot_token_here
# ID сервера: ПКМ по названию сервера → «Копировать ID» (включите режим разработчика)
GUILD_ID=0
# Включить приём текста сообщений (нужно для части команд). 1 = да, 0 = нет
ENABLE_MESSAGE_CONTENT_INTENT=1
# Кэш сообщений в памяти (0 = отключить). Меньше = меньше памяти
BOT_MAX_MESSAGES=500
# Префикс текстовых команд (для совместимости, по умолчанию /)
COMMAND_PREFIX=/
# Куда писать лог (файл на диске)
LOG_FILE=bot.log
# Формат строки лога (можно не менять)
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s


# -----------------------------------------------------------------------------
# КТО МОЖЕТ ОБРАБАТЫВАТЬ ЗАЯВКИ И РАПОРТЫ (роли staff)
# -----------------------------------------------------------------------------
# Кто нажимает «Принять» / «Отклонить» / «На редактирование» в заявках «Курсант»
STAFF_ROLE_ID=0
# Кто обрабатывает заявки «Перевод» и «Гос. сотрудник»
TRANSFER_STAFF_ROLE_ID=0
GOV_STAFF_ROLE_ID=0
# Кто одобряет/отклоняет рапорты на увольнение
FIRING_STAFF_ROLE_ID=0
# Роль старшего состава: только она может нажимать кнопку «Уволить» (увольнение по ID без рапорта)
FIRING_SENIOR_ROLE_ID=0
# Кто обрабатывает заявки на склад
WAREHOUSE_STAFF_ROLE_ID=0


# -----------------------------------------------------------------------------
# КАКИЕ РОЛИ ВЫДАВАТЬ ПРИ ПРИНЯТИИ ЗАЯВОК (порядок строк важен)
# -----------------------------------------------------------------------------
# При принятии заявки «Курсант» — выдаются эти роли по порядку
CADET_ROLE_01=0
CADET_ROLE_02=0
CADET_ROLE_03=0
# При принятии заявки «Перевод»
TRANSFER_ROLE_01=0
TRANSFER_ROLE_02=0
# При принятии заявки «Гос. сотрудник» — одна роль
GOV_ROLE_TO_GIVE=0


# -----------------------------------------------------------------------------
# УВОЛЬНЕНИЕ — роли, тексты канала и префикс ника
# -----------------------------------------------------------------------------
# Роль «Уволен» — выдаётся участнику после одобрения рапорта
FIRED_ROLE_ID=0
# Роли, которые не снимать при увольнении (например ID роли @everyone = ID сервера)
KEEP_ON_FIRE_ROLE_01=0
# Заголовок и описание в шапке канала рапортов на увольнение
FIRING_HEADER_TITLE=РАПОРТ НА УВОЛЬНЕНИЕ
FIRING_HEADER_DESC=Пожалуйста, подайте заявление о вашем увольнении через эту форму.
# Текст кнопки «Подать заявление»
FIRING_BUTTON_LABEL=ПОДАТЬ ЗАЯВЛЕНИЕ НА УВОЛЬНЕНИЕ
# Заголовок всплывающей формы заявления
FIRING_MODAL_TITLE=Заявление на увольнение
# Текст причины в рапорте, если участник вышел с сервера (авто-рапорт)
FIRING_AUTO_REASON=Автоматический рапорт при выходе с сервера
# Префикс ника после увольнения (например «Уволен | Иван Петров»)
FIRING_NICKNAME_PREFIX=Уволен |
# Префикс ника в ППС (при переводе в ППС и админ-переводе)
PPS_NICKNAME_PREFIX=ППС |


# -----------------------------------------------------------------------------
# ВСЕ РОЛИ ЗВАНИЙ — перечислены для снятия при повышении
# -----------------------------------------------------------------------------
# Список ID всех ролей званий (рядовой, сержант и т.д.). При повышении старые снимаются.
ALL_RANK_ROLE_01=0
ALL_RANK_ROLE_02=0


# -----------------------------------------------------------------------------
# РОЛИ ППС — выдаются при переводе в ППС (заявка или админ-перевод)
# -----------------------------------------------------------------------------
# Порядок номеров важен: сначала отдел, потом должности
PPS_ROLE_01=0
PPS_ROLE_02=0


# -----------------------------------------------------------------------------
# КАНАЛЫ ЗАЯВОК НА ПЕРЕВОД МЕЖДУ ОТДЕЛАМИ (ГРОМ, ППС, ОСБ, ОРЛС)
# -----------------------------------------------------------------------------
# Канал, где кнопки «Подать заявку из ГРОМ» (цели: ППС, ОРЛС, ОСБ)
CHANNEL_APPLY_GROM=0
# Канал заявок «из ППС» (цели: ГРОМ, ОРЛС, ОСБ)
CHANNEL_APPLY_PPS=0
# Канал заявок «из ОСБ»
CHANNEL_APPLY_OSB=0
# Канал заявок «из ОРЛС»
CHANNEL_APPLY_ORLS=0
# Канал с меню «Административный перевод в ППС» (кнопки: ГРОМ, ОСБ, ОРЛС)
CHANNEL_ADMIN_TRANSFER=0
# Канал для лога кадровых перемещений (если совпадает с CHANNEL_ADMIN_TRANSFER — запись одна)
CHANNEL_CADRE_LOG=0


# -----------------------------------------------------------------------------
# НАЧАЛЬНИКИ И ЗАМЫ ОТДЕЛОВ — кто одобряет заявки и админ-перевод
# -----------------------------------------------------------------------------
# ГРОМ: начальник и зам (одобрение заявок из ГРОМ, кнопка «ГРОМ» в админ-переводе)
ROLE_CHIEF_GROM=0
ROLE_DEPUTY_GROM=0
# ППС: кто одобряет заявки в ППС
ROLE_CHIEF_PPS=0
ROLE_DEPUTY_PPS=0
# ОСБ: начальник и зам
ROLE_CHIEF_OSB=0
ROLE_DEPUTY_OSB=0
# ОРЛС: начальник и зам
ROLE_CHIEF_ORLS=0
ROLE_DEPUTY_ORLS=0


# -----------------------------------------------------------------------------
# РОЛИ ОТДЕЛОВ (одна роль на отдел) — снимаются/выдаются при переводе
# -----------------------------------------------------------------------------
# Одна роль «состоит в ГРОМ», одна «в ППС» и т.д.
ROLE_DEPT_GROM=0
ROLE_DEPT_PPS=0
ROLE_DEPT_OSB=0
ROLE_DEPT_ORLS=0


# -----------------------------------------------------------------------------
# РАНГИ ВНУТРИ ОТДЕЛОВ (стажёр, сотрудник и т.д.)
# -----------------------------------------------------------------------------
# Несколько ID через запятую — все ранги отдела. При переводе снимаются все, выдаётся один базовый.
ROLE_RANK_GROM_01=0
ROLE_RANK_PPS_01=0
ROLE_RANK_OSB_01=0
ROLE_RANK_ORLS_01=0


# -----------------------------------------------------------------------------
# АКАДЕМИЯ — заявки «из Академии», снятие ролей при переводе в отдел
# -----------------------------------------------------------------------------
# Роль «в Академии» / «прошедший академию» (выдаётся при повышении до сержанта)
ROLE_ACADEMY=0
# Роль отдела Академии (снимается при переводе в ГРОМ/ППС/ОСБ/ОРЛС)
ROLE_DEPT_ACADEMY=0
# Ранг(и) в Академии (можно несколько ID через запятую)
ROLE_RANK_ACADEMY_01=0
ROLE_PASSED_ACADEMY=0


# -----------------------------------------------------------------------------
# ОСНОВНЫЕ КАНАЛЫ — заявки, старт, экзамен, увольнение, склад, академия
# -----------------------------------------------------------------------------
# Канал, где кнопки «Курсант» / «Перевод» / «Гос. сотрудник» и стартовое сообщение
REQUEST_CHANNEL_ID=0
START_CHANNEL_ID=0
# Канал экзамена (кнопка «Перейти в канал экзамена» в ЛС курсанту)
EXAM_CHANNEL_ID=0
# Канал рапортов на увольнение (кнопка «Подать заявление»)
FIRING_CHANNEL_ID=0
# Канал заявок на склад
WAREHOUSE_REQUEST_CHANNEL_ID=0
# Канал, куда бот пишет одобренные заявки на склад (аудит)
WAREHOUSE_AUDIT_CHANNEL_ID=0
# Канал Академии (для проверки сообщений повышений)
ACADEMY_CHANNEL_ID=0


# -----------------------------------------------------------------------------
# КАНАЛЫ ПОВЫШЕНИЙ — в каком канале какие рапорты обрабатывать
# -----------------------------------------------------------------------------
# Формат: ID_канала:ID_роли1,ID_роли2,... (роли = кто может нажимать «Одобрить»/«Отклонить» в этом канале). Минимум одна строка обязательна.
# Примеры:
# PROMOTION_CH_01=123456789012345678:111111111111111111
# PROMOTION_CH_02=123456789012345678:111111111111111111,222222222222222222
PROMOTION_CH_01=0:0
# 1 = при старте создавать сообщения «Подать рапорт» в каналах
PROMOTION_AUTO_SEND_ON_STARTUP=1


# -----------------------------------------------------------------------------
# МАППИНГ ПОВЫШЕНИЙ — какой текст в рапорте → какую роль звания выдать
# -----------------------------------------------------------------------------
# Формат: «Текст перехода из рапорта»:ID_роли. Минимум одна строка обязательна.
RANKMAP_01=Рядовой -> Младший Сержант:0


# -----------------------------------------------------------------------------
# ВЕБХУКИ (например из Google Forms) — белый список
# -----------------------------------------------------------------------------
# Если пусто — принимаются сообщения от любых вебхуков в любых каналах.
# ID вебхуков через запятую (ПКМ по сообщению от вебхука → «Копировать ID»)
WEBHOOK_ALLOWED_IDS=
# ID каналов, в которых разрешены вебхуки (через запятую)
WEBHOOK_ALLOWED_CHANNEL_IDS=


# -----------------------------------------------------------------------------
# КАДРОВЫЙ АУДИТ — отправка в Google Form (принят / повышен / уволен)
# -----------------------------------------------------------------------------
# URL формы: в форме «Отправить» → «Предварительная ссылка» → скопировать ссылку вида .../formResponse
# Пустое значение = отправка в форму отключена
AUDIT_FORM_URL=
# Имена полей формы (в режиме редактирования: три точки у вопроса → «Получить предварительную ссылку» — там entry.xxxxx)
AUDIT_FIELD_OFFICER=
AUDIT_FIELD_TARGET_ID=
AUDIT_FIELD_ACTION=
AUDIT_FIELD_RANK=
AUDIT_FIELD_REASON_LINK=


# -----------------------------------------------------------------------------
# ТАЙМАУТЫ И ИНТЕРВАЛЫ (в секундах, кроме часов)
# -----------------------------------------------------------------------------
# Минимальный интервал между повторными заявками «Курсант»/«Перевод»/«Гос» от одного пользователя (сек)
REQUEST_COOLDOWN=60
# Сколько дней хранить старые заявки в БД (после — удаляются при очистке)
REQUEST_EXPIRY_DAYS=7
# Срок хранения черновиков рапортов на повышение (дней), после — удаление при очистке
ORLS_DRAFT_EXPIRY_DAYS=14
OSB_DRAFT_EXPIRY_DAYS=14
GROM_DRAFT_EXPIRY_DAYS=14
PPS_DRAFT_EXPIRY_DAYS=14
# Как часто проверять, на месте ли стартовое сообщение в канале (сек)
START_MESSAGE_CHECK_INTERVAL=60
# Как часто проверять, что сообщение «Подать рапорт» внизу канала (сек). 0 = только при новом сообщении
PROMOTION_SETUP_CHECK_INTERVAL=90
# Минимальный интервал между заявками на склад от одного пользователя (часы)
WAREHOUSE_COOLDOWN_HOURS=6
# Через сколько секунд исчезает кнопка «Перейти в канал экзамена» в ЛС курсанту
EXAM_BUTTON_TIMEOUT=120
# Таймауты меню склада (сек): корзина и подменю выбора категории/предмета
WAREHOUSE_CART_TIMEOUT=300
WAREHOUSE_SUBVIEW_TIMEOUT=180
# Тексты статусов заявок на перевод (опционально, по умолчанию — из кода)
# DEPT_TRANSFER_STATUS_APPROVED_SOURCE=...
# DEPT_TRANSFER_STATUS_APPROVED_FULL=...


# -----------------------------------------------------------------------------
# БАЗА ДАННЫХ (SQLite)
# -----------------------------------------------------------------------------
# Пустой DB_PATH = использовать путь из DATABASE_URL или data/bot.db
DB_PATH=
# Формат для SQLite: sqlite+aiosqlite:///путь/к/файлу.db (папка создаётся автоматически)
DATABASE_URL=


# -----------------------------------------------------------------------------
# ЛОГИРОВАНИЕ
# -----------------------------------------------------------------------------
# Уровень: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO


# -----------------------------------------------------------------------------
# ЛИМИТЫ ПРОВЕРКИ ДАННЫХ (длины имён, причин и т.д.)
# -----------------------------------------------------------------------------
MIN_NAME_LENGTH=2
MAX_NAME_LENGTH=30
MAX_REASON_LENGTH=500
MAX_RANK_LENGTH=30
STATIC_ID_LENGTH=6
# Допустимый возраст в заявке в подразделение (лет)
DEPT_APPLY_AGE_MIN=10
DEPT_APPLY_AGE_MAX=100
# Максимум полей в одном embed (лимит Discord 25)
MAX_EMBED_FIELDS=25


# -----------------------------------------------------------------------------
# ТЕКСТЫ ДЛЯ КАДРОВОГО АУДИТА (отправка в форму)
# -----------------------------------------------------------------------------
# Значения, которые бот подставляет в поле «действие» и «звание»
AUDIT_ACTION_ACCEPTED=Принят
AUDIT_ACTION_FIRED=Уволен
AUDIT_ACTION_PROMOTED=Повышен
RANK_PRIVATE=Рядовой полиции
RANK_FIRED=Уволен


# -----------------------------------------------------------------------------
# ССЫЛКИ НА КАРТИНКИ В ЛС КУРСАНТУ (приказ / экзамен)
# -----------------------------------------------------------------------------
# Прямые ссылки на изображения (Discord CDN или любой URL). Пусто = не показывать.
EXAM_HERB_URL=
EXAM_SEAL_URL=


# -----------------------------------------------------------------------------
# РЕГУЛЯРНЫЕ ВЫРАЖЕНИЯ И ФОРМАТЫ (валидация имён, званий, ссылок, статик-ID)
# -----------------------------------------------------------------------------
# Пусто = значения по умолчанию из кода.
NAME_PATTERN=
RANK_PATTERN=
URL_PATTERN=
STATIC_ID_FORMAT=


# -----------------------------------------------------------------------------
# ФОРМУЛИРОВКИ ЗВАНИЙ ДЛЯ РАПОРТОВ ПОВЫШЕНИЯ (через запятую)
# -----------------------------------------------------------------------------
# Какие формулировки считать «не в ППС» и «повышение до сержанта». Пусто = дефолты из кода.
# RANK_NON_PPS=рядовой -> младший сержант,рядовой → младший сержант,младший сержант
# RANK_SERGEANT_PROMOTIONS=младший сержант -> сержант,младший сержант → сержант,...


# -----------------------------------------------------------------------------
# ТЕКСТЫ СТАРТОВЫХ СООБЩЕНИЙ И СКЛАДА (опционально)
# -----------------------------------------------------------------------------
# Заголовок и описание главного меню заявок (Курсант/Перевод/Гос). В описании плейсхолдеры: {cooldown}, {expiry_days}
# START_MSG_TITLE=Подача заявки
# START_MSG_DESCRIPTION=...
# Заголовок и описание блока «Склад». В описании плейсхолдер: {cooldown_hours}
# WAREHOUSE_START_TITLE=Склад УВД
# WAREHOUSE_START_DESCRIPTION=...
# WAREHOUSE_REQUEST_TITLE=Заявка на снаряжение
# WAREHOUSE_REQUEST_FOOTER=Создано: {time}


# -----------------------------------------------------------------------------
# ТЕКСТЫ ПРИКАЗА И ЭКЗАМЕНА В ЛС КУРСАНТУ (опционально)
# -----------------------------------------------------------------------------
# Заголовок и подпись приказа при принятии в академию; шаблон приказа (плейсхолдеры: report_id, day, month, year, name)
# EXAM_WELCOME_TITLE=...
# EXAM_WELCOME_SUBTITLE=...
# EXAM_ORDER_TEXT=...
# Шаблон повестки на экзамен: {header}, {date}, {name}, {greeting}. Фразы приветствия через |
# EXAM_HEADER=...
# EXAM_NOTIFICATION_TEMPLATE=...
# EXAM_CONGRATS=Добро пожаловать! Ожидайте дальнейших указаний.|Удачи на экзамене!
